package com.ridebookingapp.userservice;

import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.security.core.userdetails.UserDetails;
import org.springframework.security.core.userdetails.UserDetailsService;
import org.springframework.security.core.userdetails.UsernameNotFoundException;
import org.springframework.stereotype.Service;

import com.ridebookingapp.repository.UserRepository;


@Service
public class UserService implements UserDetailsService{

	private static final String USER_NOT_FOUND_MSG = 
			"user with email %s not found";
	private final UserRepository userrepository ;
	
	@Autowired  // Inject UserRepository through constructor
    public UserService(UserRepository userRepository) {
        this.userrepository = userRepository;
    }
	
	@Override
	public UserDetails loadUserByUsername(String username) 
			throws UsernameNotFoundException {
				return userrepository.findByEmail(email)
						.orElSeThrow(() -> new 
								UsernameNotFoundException(String.format(USER_NOT_FOUND_MSG, email)));
		
		
	}

}
